import{D as $,H as A,F as k,b as D,L as q,c as N,S as O,P as j,W as X,d as Z,M as J,a as K,O as Q}from"./OrbitControls-23c07a62.js";import{r as ee,o as re,a as ae,c as te}from"./index-4158760f.js";class ne extends ${constructor(m){super(m),this.type=A}parse(m){const i=function(e,a){switch(e){case 1:throw new Error("THREE.RGBELoader: Read Error: "+(a||""));case 2:throw new Error("THREE.RGBELoader: Write Error: "+(a||""));case 3:throw new Error("THREE.RGBELoader: Bad File Format: "+(a||""));default:case 4:throw new Error("THREE.RGBELoader: Memory Error: "+(a||""))}},y=`
`,g=function(e,a,t){a=a||1024;let l=e.pos,s=-1,r=0,c="",n=String.fromCharCode.apply(null,new Uint16Array(e.subarray(l,l+128)));for(;0>(s=n.indexOf(y))&&r<a&&l<e.byteLength;)c+=n,r+=n.length,l+=128,n+=String.fromCharCode.apply(null,new Uint16Array(e.subarray(l,l+128)));return-1<s?(t!==!1&&(e.pos+=r+s+1),c+n.slice(0,s)):!1},_=function(e){const a=/^#\?(\S+)/,t=/^\s*GAMMA\s*=\s*(\d+(\.\d+)?)\s*$/,o=/^\s*EXPOSURE\s*=\s*(\d+(\.\d+)?)\s*$/,l=/^\s*FORMAT=(\S+)\s*$/,s=/^\s*\-Y\s+(\d+)\s+\+X\s+(\d+)\s*$/,r={valid:0,string:"",comments:"",programtype:"RGBE",format:"",gamma:1,exposure:1,width:0,height:0};let c,n;for((e.pos>=e.byteLength||!(c=g(e)))&&i(1,"no header found"),(n=c.match(a))||i(3,"bad initial token"),r.valid|=1,r.programtype=n[1],r.string+=c+`
`;c=g(e),c!==!1;){if(r.string+=c+`
`,c.charAt(0)==="#"){r.comments+=c+`
`;continue}if((n=c.match(t))&&(r.gamma=parseFloat(n[1])),(n=c.match(o))&&(r.exposure=parseFloat(n[1])),(n=c.match(l))&&(r.valid|=2,r.format=n[1]),(n=c.match(s))&&(r.valid|=4,r.height=parseInt(n[1],10),r.width=parseInt(n[2],10)),r.valid&2&&r.valid&4)break}return r.valid&2||i(3,"missing format specifier"),r.valid&4||i(3,"missing image size specifier"),r},z=function(e,a,t){const o=a;if(o<8||o>32767||e[0]!==2||e[1]!==2||e[2]&128)return new Uint8Array(e);o!==(e[2]<<8|e[3])&&i(3,"wrong scanline width");const l=new Uint8Array(4*a*t);l.length||i(4,"unable to allocate buffer space");let s=0,r=0;const c=4*o,n=new Uint8Array(4),u=new Uint8Array(c);let V=t;for(;V>0&&r<e.byteLength;){r+4>e.byteLength&&i(1),n[0]=e[r++],n[1]=e[r++],n[2]=e[r++],n[3]=e[r++],(n[0]!=2||n[1]!=2||(n[2]<<8|n[3])!=o)&&i(3,"bad rgbe scanline format");let L=0,d;for(;L<c&&r<e.byteLength;){d=e[r++];const h=d>128;if(h&&(d-=128),(d===0||L+d>c)&&i(3,"bad scanline data"),h){const p=e[r++];for(let C=0;C<d;C++)u[L++]=p}else u.set(e.subarray(r,r+d),L),L+=d,r+=d}const Y=o;for(let h=0;h<Y;h++){let p=0;l[s]=u[h+p],p+=o,l[s+1]=u[h+p],p+=o,l[s+2]=u[h+p],p+=o,l[s+3]=u[h+p],s+=4}V--}return l},x=function(e,a,t,o){const l=e[a+3],s=Math.pow(2,l-128)/255;t[o+0]=e[a+0]*s,t[o+1]=e[a+1]*s,t[o+2]=e[a+2]*s,t[o+3]=1},W=function(e,a,t,o){const l=e[a+3],s=Math.pow(2,l-128)/255;t[o+0]=D.toHalfFloat(Math.min(e[a+0]*s,65504)),t[o+1]=D.toHalfFloat(Math.min(e[a+1]*s,65504)),t[o+2]=D.toHalfFloat(Math.min(e[a+2]*s,65504)),t[o+3]=D.toHalfFloat(1)},S=new Uint8Array(m);S.pos=0;const G=_(S),H=G.width,v=G.height,F=z(S.subarray(S.pos),H,v);let f,I,b;switch(this.type){case k:b=F.length/4;const e=new Float32Array(b*4);for(let t=0;t<b;t++)x(F,t*4,e,t*4);f=e,I=k;break;case A:b=F.length/4;const a=new Uint16Array(b*4);for(let t=0;t<b;t++)W(F,t*4,a,t*4);f=a,I=A;break;default:throw new Error("THREE.RGBELoader: unsupported type: ",this.type)}return{width:H,height:v,data:f,header:G.string,gamma:G.gamma,exposure:G.exposure,type:I}}setDataType(m){return this.type=m,this}load(m,E,w,R){function B(i,M){switch(i.type){case k:case A:i.colorSpace=q,i.minFilter=N,i.magFilter=N,i.generateMipmaps=!1,i.flipY=!0;break}E&&E(i,M)}return super.load(m,B,w,R)}}const se={__name:"qiu",setup(U){const m=ee(null),E=new O,w=new j(75,window.innerWidth/window.innerHeight,.1,1e4);w.position.z=.1;const R=new X({antialias:!0});R.setSize(window.innerWidth,window.innerHeight);let B=null;const i=()=>{B.update(),R.render(E,w),requestAnimationFrame(i)},M=new Z(.5,32,32);new ne().load("./images/hdr/ersisd-Merksem_Appartment_Living_4k.hdr",y=>{const g=new J({map:y}),_=new K(M,g);_.geometry.scale(1,1,-1),E.add(_)});const T=(y,g)=>{const _=new Q(y,g);return _.enableDamping=!0,_.dampingFactor=.25,_.enableZoom=!1,_.autoRotate=!1,_.autoRotateSpeed=3,_.minDistance=.2,_.enablePan=!0,B=_,_};return re(()=>{T(w,m.value),m.value.appendChild(R.domElement),i()}),(y,g)=>(ae(),te("div",{ref_key:"Dom",ref:m},null,512))}};export{se as default};
